<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"/>
  <meta name="theme-color" content="#1b5e20">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Glohe Portal</title>
  <link rel="stylesheet" href="styles.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>

<body class="login-active">
  <!-- ================= LOGIN ================= -->
  <div id="login-screen" class="login-container">
    <div style="text-align:center; margin-bottom:32px;">
      <div style="width:80px; height:80px; margin:0 auto 20px; background:linear-gradient(135deg, #2e7d32 0%, #1b5e20 100%); border-radius:20px; display:grid; place-items:center; box-shadow:0 8px 24px rgba(27,94,32,0.3);">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
      </div>
      <h1>Glohe Portal</h1>
      <p style="color:#666; font-size:14px; margin:8px 0 0;">Su Kalitesi Kontrol Sistemi</p>
    </div>
    <form id="login-form">
      <label for="username">KullanÄ±cÄ± AdÄ±</label>
      <input type="text" id="username" class="input-field" placeholder="KullanÄ±cÄ± adÄ±nÄ±zÄ± girin" required autocomplete="username" />
      
      <label for="password">Åžifre</label>
      <input type="password" id="password" class="input-field" placeholder="Åžifrenizi girin" required autocomplete="current-password" />
      
      <button type="submit" class="submit-button">
        <span>GiriÅŸ Yap</span>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </button>
    </form>
    <p id="message"></p>
    <div style="margin-top:24px; padding-top:20px; border-top:1px solid #e8e8e8; text-align:center;">
      <p style="color:#888; font-size:13px; margin:0;">Â© 2025 Glohe Portal. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
    </div>
  </div>

  <!-- ================= PORTAL (login sonrasÄ±) ================= -->
  <div id="portal-screen" style="display:none;">
    <!-- Sol MenÃ¼ -->
    <aside class="menu" aria-label="Ana menÃ¼">
      <button class="menu-toggle" onclick="toggleMenu()" aria-label="MenÃ¼yÃ¼ aÃ§/kapat">â˜°</button>
      <ul>
        <li>
          <a href="#" onclick="showHomepage(); setActive(this); return false;" class="active" data-section-link="home" data-tooltip="Anasayfa">
            <span class="icon-wrap"><img src="icons/home.png" alt="Anasayfa"></span>
            <span>Anasayfa</span>
          </a>
        </li>
        <li>
          <a href="#" onclick="showSection('klor'); setActive(this); return false;" data-section-link="klor" data-tooltip="Klor">
            <span class="icon-wrap"><img src="icons/klor.png" alt="Klor"></span>
            <span>Klor</span>
          </a>
        </li>
        <li>
          <a href="#" onclick="showSection('sertlik'); setActive(this); return false;" data-section-link="sertlik" data-tooltip="Sertlik">
            <span class="icon-wrap"><img src="icons/sertlik.png" alt="Sertlik"></span>
            <span>Sertlik</span>
          </a>
        </li>
        <li>
          <a href="#" onclick="showSection('ph'); setActive(this); return false;" data-section-link="ph" data-tooltip="Ph">
            <span class="icon-wrap"><img src="icons/ph.png" alt="Ph"></span>
            <span>Ph</span>
          </a>
        </li>
        <li>
          <a href="#" onclick="showSection('iletkenlik'); setActive(this); return false;" data-section-link="iletkenlik" data-tooltip="Ä°letkenlik">
            <span class="icon-wrap"><img src="icons/iletkenlik.png" alt="Ä°letkenlik"></span>
            <span>Ä°letkenlik</span>
          </a>
        </li>
        <li>
          <a href="#" onclick="showSection('mikro'); setActive(this); return false;" data-section-link="mikro" data-tooltip="Mikro Biyoloji">
            <span class="icon-wrap"><img src="icons/mikro.png" alt="Mikro Biyoloji"></span>
            <span>Mikro Biyoloji</span>
          </a>
        </li>
      </ul>
    </aside>

    <!-- Ãœst Åžerit -->
    <div class="header">
      <div class="user-info">
        <span id="current-time"></span>
        <span id="logged-user"></span>
        <img id="logout-button" src="icons/cikis-glohe.png" alt="Ã‡Ä±kÄ±ÅŸ" title="Ã‡Ä±kÄ±ÅŸ"
             onclick="logout()" style="cursor:pointer;width:30px;height:30px;">
      </div>
    </div>

    <!-- MOBÄ°L ÃœST SEKME Ã‡UBUÄžU -->
    <nav class="mobile-tabs" role="tablist" aria-label="HÄ±zlÄ± geÃ§iÅŸ">
      <button type="button" class="tab active" data-section="home" onclick="mobileTabTo(this)">Anasayfa</button>
      <button type="button" class="tab" data-section="klor" onclick="mobileTabTo(this)">Klor</button>
      <button type="button" class="tab" data-section="sertlik" onclick="mobileTabTo(this)">Sertlik</button>
      <button type="button" class="tab" data-section="ph" onclick="mobileTabTo(this)">Ph</button>
      <button type="button" class="tab" data-section="iletkenlik" onclick="mobileTabTo(this)">Ä°letkenlik</button>
      <button type="button" class="tab" data-section="mikro" onclick="mobileTabTo(this)">Mikro</button>
    </nav>

    <!-- Ä°Ã§erik -->
    <main class="content">
      <!-- Anasayfa -->
      <section id="page-home">
        <!-- KarÅŸÄ±lama KartÄ± -->
        <div style="background:linear-gradient(135deg, #1b5e20 0%, #2e7d32 100%); border-radius:20px; padding:40px 32px; margin-bottom:28px; box-shadow:0 8px 32px rgba(27,94,32,0.25); position:relative; overflow:hidden;">
          <div style="position:absolute; top:-50px; right:-50px; width:200px; height:200px; background:rgba(255,255,255,0.08); border-radius:50%;"></div>
          <div style="position:absolute; bottom:-30px; left:-30px; width:150px; height:150px; background:rgba(255,255,255,0.06); border-radius:50%;"></div>
          <div style="position:relative; z-index:1;">
            <h1 style="margin:0 0 12px; color:#fff; font-size:32px; font-weight:900; letter-spacing:-0.5px;">HoÅŸ Geldiniz! ðŸ‘‹</h1>
            <p style="margin:0 0 20px; color:rgba(255,255,255,0.9); font-size:16px; line-height:1.6; max-width:600px;">
              Su kalitesi kontrol sisteminize hoÅŸ geldiniz. TÃ¼m Ã¶lÃ§Ã¼m deÄŸerlerinizi kolayca takip edebilir, trend analizleri yapabilir ve raporlar oluÅŸturabilirsiniz.
            </p>
            <div style="display:flex; gap:16px; flex-wrap:wrap;">
              <div style="background:rgba(255,255,255,0.15); backdrop-filter:blur(8px); padding:14px 20px; border-radius:12px; border:1px solid rgba(255,255,255,0.2);">
                <div style="color:rgba(255,255,255,0.8); font-size:12px; font-weight:600; margin-bottom:4px;">Toplam KayÄ±t</div>
                <div id="total-records" style="color:#fff; font-size:24px; font-weight:800;">0</div>
              </div>
              <div style="background:rgba(255,255,255,0.15); backdrop-filter:blur(8px); padding:14px 20px; border-radius:12px; border:1px solid rgba(255,255,255,0.2);">
                <div style="color:rgba(255,255,255,0.8); font-size:12px; font-weight:600; margin-bottom:4px;">BugÃ¼nkÃ¼ Ã–lÃ§Ã¼m</div>
                <div id="today-records" style="color:#fff; font-size:24px; font-weight:800;">0</div>
              </div>
              <div style="background:rgba(255,255,255,0.15); backdrop-filter:blur(8px); padding:14px 20px; border-radius:12px; border:1px solid rgba(255,255,255,0.2);">
                <div style="color:rgba(255,255,255,0.8); font-size:12px; font-weight:600; margin-bottom:4px;">Aktif Kategori</div>
                <div style="color:#fff; font-size:24px; font-weight:800;">5</div>
              </div>
            </div>
          </div>
        </div>

        <div id="saved-values" class="saved-values">
          <h3>Son Kaydedilen DeÄŸerler</h3>

          <!-- KayÄ±t tablosu -->
          <div style="overflow:auto;">
            <table id="recent-table" style="width:100%; border-collapse:separate; border-spacing:0 8px;">
              <thead>
                <tr>
                  <th style="text-align:left; padding:8px 10px;">Kategori</th>
                  <th style="text-align:left; padding:8px 10px;">Kontrol NoktasÄ±</th>
                  <th style="text-align:left; padding:8px 10px;">DeÄŸer</th>
                  <th style="text-align:left; padding:8px 10px;">Birim</th>
                  <th style="text-align:left; padding:8px 10px;">Tarih</th>
                  <th style="text-align:left; padding:8px 10px;">Saat</th>
                  <th style="text-align:left; padding:8px 10px;">KullanÄ±cÄ±</th>
                  <th style="text-align:left; padding:8px 10px;">AÃ§Ä±klama</th>
                </tr>
              </thead>
              <tbody id="recent-tbody">
                <tr class="empty">
                  <td colspan="8" style="padding:12px 10px; opacity:.7;">HenÃ¼z kayÄ±t yok.</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Trend Analizi -->
          <div style="margin-top:24px;">
            <div class="toolbar" style="margin-bottom:12px;">
              <h3 style="margin:0; color:#1b5e20; font-size:18px;">ðŸ“ˆ Trend Analizi</h3>
              <div>
                <select id="trend-category" class="input" style="max-width:220px;">
                  <option value="klor">Klor</option>
                  <option value="sertlik">Sertlik</option>
                  <option value="ph">Ph</option>
                  <option value="iletkenlik">Ä°letkenlik</option>
                  <option value="mikro">Mikro Biyoloji</option>
                </select>
              </div>
            </div>
            <div style="background:#fff;border:1px solid #e6e6e6;border-radius:12px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,.06);">
              <canvas id="trendChart" style="height:320px;"></canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- Klor -->
      <section id="page-klor" style="display:none;">
        <div class="toolbar">
          <h2>Klor Kontrol NoktalarÄ±</h2>
          <div class="right">
            <input class="input" id="search" type="search" placeholder="Kontrol noktasÄ± ara..."/>
          </div>
        </div>

        <div class="control-points">
          <div class="grid" id="klor-grid">
            <div class="box" data-point="Kontrol NoktasÄ± 1">Kontrol NoktasÄ± 1</div>
            <div class="box" data-point="Kontrol NoktasÄ± 2">Kontrol NoktasÄ± 2</div>
            <div class="box" data-point="Kontrol NoktasÄ± 3">Kontrol NoktasÄ± 3</div>
            <div class="box" data-point="Kontrol NoktasÄ± 4">Kontrol NoktasÄ± 4</div>
            <div class="box" data-point="Kontrol NoktasÄ± 5">Kontrol NoktasÄ± 5</div>
            <div class="box" data-point="Kontrol NoktasÄ± 6">Kontrol NoktasÄ± 6</div>
            <div class="box" data-point="Kontrol NoktasÄ± 7">Kontrol NoktasÄ± 7</div>
            <div class="box" data-point="Kontrol NoktasÄ± 8">Kontrol NoktasÄ± 8</div>
            <div class="box" data-point="Kontrol NoktasÄ± 9">Kontrol NoktasÄ± 9</div>
            <div class="box" data-point="Kontrol NoktasÄ± 10">Kontrol NoktasÄ± 10</div>
            <div class="box" data-point="Kontrol NoktasÄ± 11">Kontrol NoktasÄ± 11</div>
            <div class="box" data-point="Kontrol NoktasÄ± 12">Kontrol NoktasÄ± 12</div>
            <div class="box" data-point="Kontrol NoktasÄ± 13">Kontrol NoktasÄ± 13</div>
          </div>
        </div>
      </section>

      <!-- Sertlik -->
      <section id="page-sertlik" style="display:none;">
        <div class="toolbar">
          <h2>Sertlik Kontrol NoktalarÄ±</h2>
          <div class="right">
            <input class="input" id="search-sertlik" type="search" placeholder="Kontrol noktasÄ± ara..."/>
          </div>
        </div>
        <div class="control-points">
          <div class="grid" id="sertlik-grid">
            <div class="box" data-point="Kontrol NoktasÄ± 1">Kontrol NoktasÄ± 1</div>
            <div class="box" data-point="Kontrol NoktasÄ± 2">Kontrol NoktasÄ± 2</div>
            <div class="box" data-point="Kontrol NoktasÄ± 3">Kontrol NoktasÄ± 3</div>
            <div class="box" data-point="Kontrol NoktasÄ± 4">Kontrol NoktasÄ± 4</div>
            <div class="box" data-point="Kontrol NoktasÄ± 5">Kontrol NoktasÄ± 5</div>
            <div class="box" data-point="Kontrol NoktasÄ± 6">Kontrol NoktasÄ± 6</div>
            <div class="box" data-point="Kontrol NoktasÄ± 7">Kontrol NoktasÄ± 7</div>
            <div class="box" data-point="Kontrol NoktasÄ± 8">Kontrol NoktasÄ± 8</div>
            <div class="box" data-point="Kontrol NoktasÄ± 9">Kontrol NoktasÄ± 9</div>
            <div class="box" data-point="Kontrol NoktasÄ± 10">Kontrol NoktasÄ± 10</div>
            <div class="box" data-point="Kontrol NoktasÄ± 11">Kontrol NoktasÄ± 11</div>
            <div class="box" data-point="Kontrol NoktasÄ± 12">Kontrol NoktasÄ± 12</div>
            <div class="box" data-point="Kontrol NoktasÄ± 13">Kontrol NoktasÄ± 13</div>
          </div>
        </div>
      </section>

      <!-- Ph -->
      <section id="page-ph" style="display:none;">
        <div class="toolbar">
          <h2>Ph Kontrol NoktalarÄ±</h2>
          <div class="right">
            <input class="input" id="search-ph" type="search" placeholder="Kontrol noktasÄ± ara..."/>
          </div>
        </div>
        <div class="control-points">
          <div class="grid" id="ph-grid">
            <div class="box" data-point="Kontrol NoktasÄ± 1">Kontrol NoktasÄ± 1</div>
            <div class="box" data-point="Kontrol NoktasÄ± 2">Kontrol NoktasÄ± 2</div>
            <div class="box" data-point="Kontrol NoktasÄ± 3">Kontrol NoktasÄ± 3</div>
            <div class="box" data-point="Kontrol NoktasÄ± 4">Kontrol NoktasÄ± 4</div>
            <div class="box" data-point="Kontrol NoktasÄ± 5">Kontrol NoktasÄ± 5</div>
            <div class="box" data-point="Kontrol NoktasÄ± 6">Kontrol NoktasÄ± 6</div>
            <div class="box" data-point="Kontrol NoktasÄ± 7">Kontrol NoktasÄ± 7</div>
            <div class="box" data-point="Kontrol NoktasÄ± 8">Kontrol NoktasÄ± 8</div>
            <div class="box" data-point="Kontrol NoktasÄ± 9">Kontrol NoktasÄ± 9</div>
            <div class="box" data-point="Kontrol NoktasÄ± 10">Kontrol NoktasÄ± 10</div>
            <div class="box" data-point="Kontrol NoktasÄ± 11">Kontrol NoktasÄ± 11</div>
            <div class="box" data-point="Kontrol NoktasÄ± 12">Kontrol NoktasÄ± 12</div>
            <div class="box" data-point="Kontrol NoktasÄ± 13">Kontrol NoktasÄ± 13</div>
          </div>
        </div>
      </section>

      <!-- Ä°letkenlik -->
      <section id="page-iletkenlik" style="display:none;">
        <div class="toolbar">
          <h2>Ä°letkenlik Kontrol NoktalarÄ±</h2>
          <div class="right">
            <input class="input" id="search-iletkenlik" type="search" placeholder="Kontrol noktasÄ± ara..."/>
          </div>
        </div>
        <div class="control-points">
          <div class="grid" id="iletkenlik-grid">
            <div class="box" data-point="Kontrol NoktasÄ± 1">Kontrol NoktasÄ± 1</div>
            <div class="box" data-point="Kontrol NoktasÄ± 2">Kontrol NoktasÄ± 2</div>
            <div class="box" data-point="Kontrol NoktasÄ± 3">Kontrol NoktasÄ± 3</div>
            <div class="box" data-point="Kontrol NoktasÄ± 4">Kontrol NoktasÄ± 4</div>
            <div class="box" data-point="Kontrol NoktasÄ± 5">Kontrol NoktasÄ± 5</div>
            <div class="box" data-point="Kontrol NoktasÄ± 6">Kontrol NoktasÄ± 6</div>
            <div class="box" data-point="Kontrol NoktasÄ± 7">Kontrol NoktasÄ± 7</div>
            <div class="box" data-point="Kontrol NoktasÄ± 8">Kontrol NoktasÄ± 8</div>
            <div class="box" data-point="Kontrol NoktasÄ± 9">Kontrol NoktasÄ± 9</div>
            <div class="box" data-point="Kontrol NoktasÄ± 10">Kontrol NoktasÄ± 10</div>
            <div class="box" data-point="Kontrol NoktasÄ± 11">Kontrol NoktasÄ± 11</div>
            <div class="box" data-point="Kontrol NoktasÄ± 12">Kontrol NoktasÄ± 12</div>
            <div class="box" data-point="Kontrol NoktasÄ± 13">Kontrol NoktasÄ± 13</div>
          </div>
        </div>
      </section>

      <!-- Mikro Biyoloji -->
      <section id="page-mikro" style="display:none;">
        <div class="toolbar">
          <h2>Mikro Biyoloji Kontrol NoktalarÄ±</h2>
          <div class="right">
            <input class="input" type="search" placeholder="Kontrol noktasÄ± ara..."/>
          </div>
        </div>
        <div class="control-points">
          <div class="grid">
            <div class="box">Kontrol NoktasÄ± 1</div>
            <div class="box">Kontrol NoktasÄ± 2</div>
            <div class="box">Kontrol NoktasÄ± 3</div>
            <div class="box">Kontrol NoktasÄ± 4</div>
            <div class="box">Kontrol NoktasÄ± 5</div>
            <div class="box">Kontrol NoktasÄ± 6</div>
            <div class="box">Kontrol NoktasÄ± 7</div>
            <div class="box">Kontrol NoktasÄ± 8</div>
            <div class="box">Kontrol NoktasÄ± 9</div>
            <div class="box">Kontrol NoktasÄ± 10</div>
            <div class="box">Kontrol NoktasÄ± 11</div>
            <div class="box">Kontrol NoktasÄ± 12</div>
            <div class="box">Kontrol NoktasÄ± 13</div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Modal + Overlay + Toast -->
  <div class="overlay" id="overlay"></div>
  <div class="modal" id="entry-modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-card">
      <div class="modal-head">
        <h3 class="modal-title" id="modalTitle">Klor Ã–lÃ§Ã¼m KaydÄ±</h3>
        <button class="btn btn-ghost" id="btn-close-modal" aria-label="Kapat">Kapat</button>
      </div>
      <form id="entry-form">
        <div class="modal-body">
          <div class="form-grid">
            <div>
              <label for="point">Kontrol NoktasÄ±</label>
              <select id="point" required>
                <option value="">SeÃ§iniz...</option>
                <option>Kontrol NoktasÄ± 1</option>
                <option>Kontrol NoktasÄ± 2</option>
                <option>Kontrol NoktasÄ± 3</option>
                <option>Kontrol NoktasÄ± 4</option>
                <option>Kontrol NoktasÄ± 5</option>
                <option>Kontrol NoktasÄ± 6</option>
                <option>Kontrol NoktasÄ± 7</option>
                <option>Kontrol NoktasÄ± 8</option>
                <option>Kontrol NoktasÄ± 9</option>
                <option>Kontrol NoktasÄ± 10</option>
                <option>Kontrol NoktasÄ± 11</option>
                <option>Kontrol NoktasÄ± 12</option>
                <option>Kontrol NoktasÄ± 13</option>
              </select>
            </div>

            <div>
              <label for="value">Ã–lÃ§Ã¼m DeÄŸeri</label>
              <input id="value" type="number" step="0.001" placeholder="Ã–rn: 0.50" required/>
            </div>

            <div>
              <label for="unit">Birim</label>
              <input id="unit" type="text" value="ppm" readonly style="background:#f5f5f5; cursor:not-allowed;">
            </div>

            <div class="full">
              <label for="note">AÃ§Ä±klama</label>
              <textarea id="note" rows="4" placeholder="Ä°steÄŸe baÄŸlÄ± not ekleyebilirsiniz"></textarea>
            </div>

            <!-- Gizli alanlar -->
            <input type="hidden" id="date" />
            <input type="hidden" id="date_value" />
            <input type="hidden" id="time" />
            <input type="hidden" id="time_value" />
          </div>
        </div>
        <div class="modal-foot">
          <button type="button" class="btn btn-ghost" id="btn-cancel">VazgeÃ§</button>
          <button type="submit" class="btn btn-primary">Kaydet</button>
        </div>

        <!-- KullanÄ±cÄ± (gizli) -->
        <input type="hidden" id="user" name="user" />
      </form>
    </div>
  </div>
  <div class="toast" id="toast">KayÄ±t baÅŸarÄ±yla kaydedildi.</div>

  <script src="script.js"></script>
</body>
</html>