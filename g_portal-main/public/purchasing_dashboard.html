<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Satƒ±n Alma Paneli - Glohe Portal</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/purchasing.css">
    <link rel="stylesheet" href="styles/purchasing_dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#0d1b2a">
</head>
<body>
    <div class="app-container">
        <!-- App Header -->
        <header class="app-header">
            <h1 id="header-title">Panel</h1>
            <button id="logout-button">√áƒ±kƒ±≈ü</button>
        </header>

        <!-- App Main Content -->
        <main class="app-main">
            <!-- Dashboard/Panel View -->
            <div id="view-dashboard" class="app-view active">
                <section class="kpi-cards">
                    <div class="card">
                        <h2>Toplam Sipari≈ü</h2>
                        <p id="kpi-total-orders">--</p>
                    </div>
                    <div class="card">
                        <h2>A√ßƒ±k Sipari≈üler</h2>
                        <p id="kpi-open-orders">--</p>
                    </div>
                    <div class="card">
                        <h2>Kƒ±smi Sipari≈üler</h2>
                        <p id="kpi-partial-orders">--</p>
                    </div>
                    <div class="card">
                        <h2>Toplam Tutar</h2>
                        <p id="kpi-total-amount">--</p>
                    </div>
                     <div class="card">
                        <h2>Ort. Termin Farkƒ±</h2>
                        <p id="kpi-avg-delivery">--</p>
                    </div>
                </section>
                <section class="chart-container">
                    <h2>Haftalƒ±k Sipari≈ü √ñzeti</h2>
                    <canvas id="weekly-orders-chart"></canvas>
                </section>
            </div>

            <!-- Orders View -->
            <div id="view-orders" class="app-view">
                <div class="view-header">
                    <h2>Sipari≈ü Raporu</h2>
                </div>

                <!-- Hƒ±zlƒ± Arama -->
                <div class="quick-search-container">
                    <input
                        type="text"
                        id="quick-search-orders"
                        class="quick-search-input"
                        placeholder="üîç Sipari≈ü No, Tedarik√ßi, Malzeme ara..."
                        oninput="quickSearchOrders(this.value)"
                    />
                    <button id="advanced-filter-button" class="icon-button-small" onclick="openAdvancedFilter()">
                        <span>‚öôÔ∏è Geli≈ümi≈ü Filtre</span>
                    </button>
                </div>

                <!-- Sipari≈ü Listesi -->
                <div id="orders-list">
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                </div>
            </div>

            <!-- Revision Analysis View -->
            <div id="view-revision-analytics" class="app-view">
                <div class="view-header">
                    <h2>Revizyon Analizi</h2>
                </div>

                <!-- Hƒ±zlƒ± Arama -->
                <div class="quick-search-container">
                    <input
                        type="text"
                        id="quick-search-revision"
                        class="quick-search-input"
                        placeholder="üîç Malzeme ara..."
                        oninput="quickSearchRevision(this.value)"
                    />
                </div>

                <!-- Revizyon ƒ∞√ßerik -->
                <div id="revision-analytics-content">
                    <p>Revizyon analizi verileri buraya y√ºklenecek.</p>
                </div>
            </div>
        </main>

        <!-- Floating Action Button REMOVED -->

        <!-- Bottom Navigation -->
        <nav class="app-nav">
            <button class="nav-item active" data-view="dashboard">
                <span class="icon">üìä</span>
                <span class="label">√ñzet</span>
            </button>
            <button class="nav-item" data-view="orders">
                <span class="icon">üì¶</span>
                <span class="label">Sipari≈ü Raporu</span>
            </button>
            <button class="nav-item" data-view="revision-analytics">
                <span class="icon">üîÑ</span>
                <span class="label">Revizyon Analiz</span>
            </button>
        </nav>
    </div>

    <script type="module" src="scripts/purchasing_dashboard.js"></script>
    <script type="module" src="scripts/revision-analytics.js"></script>

    <!-- Filter Modal -->
    <div id="filter-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Filtrele & Sƒ±rala</h2>
                <button id="close-filter-modal" class="icon-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="filter-group">
                    <label for="filter-search">Genel Arama</label>
                    <input type="text" id="filter-search" placeholder="Sipari≈ü No, Tedarik√ßi, Malzeme...">
                </div>
                <div class="filter-group">
                    <label for="filter-status">Teslimat Durumu</label>
                    <select id="filter-status">
                        <option value="">T√ºm√º</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filter-supplier">Tedarik√ßi</label>
                    <select id="filter-supplier">
                        <option value="">T√ºm√º</option>
                    </select>
                </div>
                 <div class="filter-group">
                    <label for="filter-start-date">Ba≈ülangƒ±√ß Tarihi</label>
                    <input type="date" id="filter-start-date">
                </div>
                 <div class="filter-group">
                    <label for="filter-end-date">Biti≈ü Tarihi</label>
                    <input type="date" id="filter-end-date">
                </div>
            </div>
            <div class="modal-footer">
                <button id="reset-filters-button" class="btn-secondary">Filtreleri Temizle</button>
                <button id="apply-filters-button" class="btn-primary">Uygula</button>
            </div>
        </div>
    </div>
</body>
</html>
